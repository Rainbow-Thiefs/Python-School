- [Environment](#environment)
- [Package Management](#package-management)
- [pip](#pip)
  - [pip freeze](#pip-freeze)
- [Virtual Environment](#virtual-environment)
  - [Venv](#venv)
  - [Virtualenv](#virtualenv)
  - [Pipenv](#pipenv)
  - [Pyenv](#pyenv)
- [Running web-applications](#running-web-applications)

[Вернуться на главную](./README.md)

# Environment
Термины и понятия.

Настройка окружения важная и не отъемлемая часть работы для любого разработчика.

Несмотря на то, что на сегодняшний день существуют практики DevOps, разработчики frontend и backend должны понимать механизмы взаимодейсвтия технологий и инструментов. Часто разработчики оказываются в ситуации, когда их код прекрасно работает на локальных dev-машинах, но при попытке перенести приложение на другие машины приложение невозможно запустить из-за отсутствия необходимых зависимостей, из-за жёстко прописанных IP-адресов, прочих настроек. Хороший разработчик заранее обеспечивает переносимость приложения на другие машины (хосты - hosts).

Environment (окружение) - окружение может включать в себя любое количество серверов, приложений необходимых для разработки или эксплуатации основного разрабатываемого продукта (приложения). Разработчик должен понимать как работает окружение и как его настраивать для эффективной разработки и устранения проблем.

Понятие Toolchain - дословно, цепочка инструментов, используемых в разработке, другими словами, набор приложений, библиотек и инструментов, которые обеспечивают работу приложения. К примеру, гипервизоры ESXi, docker-compose, nginx, react (javascript), terraform. Также, версии инструментов имеют значения, т.к. из-за разницы версий могут возникать проблемы во взаимодействии инструментов.

> Цель данного материала дать общее понимание в работе с окружениями и инструментарием python, чтобы разработчики без труда могли находить описание интересующих инструментов, примеры работы с ними в официальной документации.

# Package Management
Для расширения функциональности и для эффективной разработки приложений любой инженер использует готовые инструменты, в python таковыми являются модули и пакеты (modules and packages).
>Module - код, который решает некоторые задачи и находится в одном файле.

>Package - набор модулей, решающих, как правило, класс задач.

Существует 3 основных источника модулей/пакетов:
- Standard Library - стандартная библиотека, которая устанавливается вместе с установкой python (2,3) и содержит, к примеру, следующие модули: string, re, datetime, math, random, os, multiprocessing, subprocess, socket, email, json, doctest, unittest, pdb, argparse and sys.
Решаемые задачи с помощью стандартной библиотеки: string parsing, data serialization, testing, debugging and manipulating dates, emails, command line arguments.
Это только часть модулей, все модули описаны на сайте www.python.org. Также, полезно знать, что часть модулей написана на python, а часть на C.
- Third-party modules - модули, которые написаны сообществом python и которое хранятся репозитории PyPi (Python Package Index https://pypi.org/)
- Модули написанные самостоятельно, для своих нужд. При желании, имеется возможность добавлять свои модули PyPi.

Стоит отметить, что существуют пакеты, которые позволяют организовать свой локальный индекс для пакетов. Это может быть удобным при разработке закрытых пакетов, а также для уверенности, что нужные пакеты соответствующих версий всегда будут доступны, даже если автор пакета прекратит поддержку или даже удалит пакет из официального PyPi.

# pip
Package Manager PIP - The Python Package Installer - пакетный менеджер pip.
Официальная документация по установке пакетного менеджера: https://pip.pypa.io/en/stable/installing/

Полная документация: https://pip.pypa.io/en/stable/

Начиная с версий 2 >=2.7.9 и Python 3 >=3.4 pip устанавливается вместе с python.

На MacOS с версией python 2.7.16 pip отсутствует.

Ручная установка pip:
```bash
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python get-pip.py
```

Обновление пакетного менеджера pip:
- под linux macOS:
```bash
pip install -U pip
```
- под windows:
```bash
python -m pip install -U pip
```

## pip freeze
Одна из задач при разработке, не только установка необходимых пакетов на dev-машину, но также возможность автоматически установить тот же набор пакетов на других машинах/серверах для успешного запуска разрабатываемого приложения.

Для решения этой задачи имеется встроенный инструмент:
```bash
pip freeze # выведет на экран все установленные модули и пакеты, а также их версии
pip freeze > requirments.txt # перенаправить вывод в файл - т.о. все установленные модули и пакеты будут записаны в файл
pip install -r requirments.txt # установить все пакеты перечисленные в файле requirments.txt с учётом версий
```
Необходимо учитывать, что версии пакетов могут быть принципиально важными для корректной работы приложения, т.к. с другими версиями тех же модулей и пакетов может наблюдаться несовметимость.

[!NOTE]
Имя файла requirements.txt может быть совершенно любым, однако, принято использовать вышеуказанное имя файла, чтобы разработчики не задумывались над тем, где же перечислен список пакетов.


# Virtual Environment
При разработке часто возникает необходимость работы с несколькими проектами параллельно.
Во избежание конфликтов между пакетами, версиями python существует класс модулей написанных на python, которые позволяют создать несколько окружений и переключаться между ними по мере необходимости.

Виртуальные окружения представляют собой структуру каталогов, позволяющую "обмануть" основную систему так, чтобы приложению были видны только те модули и пакеты, которые установлены в папку конкретного виртуального окружения. Этот подход чем-то напоминает chroot в linux.

Также, крйане удобным инструментом ялвяется [Docker](./Docker.md), однако, это не исключает удобство и ползеность использования виртуальных окружений.

К слову, в промышленной (в production) эксплуатации, наиболее удобным является именно [Docker](Docker.md).

[!NOTE] Внимание! Виртуальные окружения предназначены исключительно для установки зависимостей приложений! Располагать папки проектов в папках для виртуальных окружений плохой тон и попросту создание неудобств себе и другим разработчикам.

## Venv
## Virtualenv
Для установки пакета virtualenv необходимо выполнить команду:
```bash
pip install virtualenv
```
Чтобы создать виртаульное окружение необходимо выполнить команду:
```bash
virtualenv project-x
```
В результате, в текущем каталоге будет создана следующая структура каталогов:
```bash
.
└── project-x
    ├── bin
    │   ├── activate
    │   ├── activate.csh
    │   ├── activate.fish
    │   ├── activate.ps1
    │   ├── activate.xsh
    │   ├── activate_this.py
    │   ├── easy_install
    │   ├── easy_install-3.7
    │   ├── pip
    │   ├── pip3
    │   ├── pip3.7
    │   ├── python -> python3.7
    │   ├── python-config
    │   ├── python3 -> python3.7
    │   ├── python3.7
    │   └── wheel
    ├── include
    │   └── python3.7m -> /usr/local/Cellar/python/3.7.5/Frameworks/Python.framework/Versions/3.7/include/python3.7m
    └── lib
        └── python3.7
```
Для того, чтобы активировать вновь созданное виртуальное окружение, необходимо выполнить команду:
```bash
source ./project-x/bin/activate
or
. /project-x/bin/activate
```
После чего, в cli (command line interface) можно будет увидеть примерно следующее приглашение:
> (project-x) $

В command prompt в скобках указано имя активного виртуального окружение, а значит, можно приступить к установке необходимых зависимостей (пакетов/модулей) и приступать к разработке.

Для того, чтобы выйти из виртуального окружения, необходимо выполнить команду (находясь в любой папке на файловой системе):
```bash
deactivate
```

## Pipenv
## Pyenv

# Running web-applications

> [!NOTE]
> Information the user should notice even if skimming.

> [!TIP]
> Optional information to help a user be more successful.

> [!IMPORTANT]
> Essential information required for user success.

> [!CAUTION]
> Negative potential consequences of an action.

> [!WARNING]
> Dangerous certain consequences of an action.